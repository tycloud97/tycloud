"use strict";(self.webpackChunktycloud=self.webpackChunktycloud||[]).push([[100],{3905:function(t,n,e){e.d(n,{Zo:function(){return h},kt:function(){return d}});var r=e(7294);function i(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function c(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function o(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?c(Object(e),!0).forEach((function(n){i(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function a(t,n){if(null==t)return{};var e,r,i=function(t,n){if(null==t)return{};var e,r,i={},c=Object.keys(t);for(r=0;r<c.length;r++)e=c[r],n.indexOf(e)>=0||(i[e]=t[e]);return i}(t,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)e=c[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])}return i}var u=r.createContext({}),l=function(t){var n=r.useContext(u),e=n;return t&&(e="function"==typeof t?t(n):o(o({},n),t)),e},h=function(t){var n=l(t.components);return r.createElement(u.Provider,{value:n},t.children)},p={inlineCode:"code",wrapper:function(t){var n=t.children;return r.createElement(r.Fragment,{},n)}},s=r.forwardRef((function(t,n){var e=t.components,i=t.mdxType,c=t.originalType,u=t.parentName,h=a(t,["components","mdxType","originalType","parentName"]),s=l(e),d=i,g=s["".concat(u,".").concat(d)]||s[d]||p[d]||c;return e?r.createElement(g,o(o({ref:n},h),{},{components:e})):r.createElement(g,o({ref:n},h))}));function d(t,n){var e=arguments,i=n&&n.mdxType;if("string"==typeof t||i){var c=e.length,o=new Array(c);o[0]=s;var a={};for(var u in n)hasOwnProperty.call(n,u)&&(a[u]=n[u]);a.originalType=t,a.mdxType="string"==typeof t?t:i,o[1]=a;for(var l=2;l<c;l++)o[l]=e[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,e)}s.displayName="MDXCreateElement"},2442:function(t,n,e){e.r(n),e.d(n,{frontMatter:function(){return a},contentTitle:function(){return u},metadata:function(){return l},toc:function(){return h},default:function(){return s}});var r=e(7462),i=e(3366),c=(e(7294),e(3905)),o=["components"],a={sidebar_position:1},u="Auth",l={unversionedId:"architecture/auth",id:"architecture/auth",title:"Auth",description:"Y\xeau c\u1ea7u nghi\u1ec7p v\u1ee5",source:"@site/docs/architecture/1-auth.md",sourceDirName:"architecture",slug:"/architecture/auth",permalink:"/tycloud/docs/architecture/auth",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/architecture/1-auth.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Research",permalink:"/tycloud/docs/architecture/auth copy"},next:{title:"C\xe1c c\xf4ng vi\u1ec7c ph\u1ea3i l\xe0m khi m\u1edbi v\xe0o",permalink:"/tycloud/docs/architecture/task-devops"}},h=[{value:"Y\xeau c\u1ea7u nghi\u1ec7p v\u1ee5",id:"y\xeau-c\u1ea7u-nghi\u1ec7p-v\u1ee5",children:[],level:2},{value:"Authorization",id:"authorization",children:[],level:2},{value:"Authentication",id:"authentication",children:[],level:2},{value:"C\xf3 kh\u1ea3 n\u0103ng ti\u1ebfp t\u1ee5c khi g\u1eb7p s\u1ef1 c\u1ed1 ho\u1eb7c revert ho\xe0n to\xe0n n\u1ebfu l\u1ed7i x\u1ea3y ra \u0111\u1ec3 ng\u01b0\u1eddi d\xf9ng c\xf3 th\u1ec3 ti\u1ebfp t\u1ee5c \u0111\u0103ng k\xfd sau khi s\u1ef1 c\u1ed1 \u0111\u01b0\u1ee3c kh\u1eafc ph\u1ee5c.",id:"c\xf3-kh\u1ea3-n\u0103ng-ti\u1ebfp-t\u1ee5c-khi-g\u1eb7p-s\u1ef1-c\u1ed1-ho\u1eb7c-revert-ho\xe0n-to\xe0n-n\u1ebfu-l\u1ed7i-x\u1ea3y-ra-\u0111\u1ec3-ng\u01b0\u1eddi-d\xf9ng-c\xf3-th\u1ec3-ti\u1ebfp-t\u1ee5c-\u0111\u0103ng-k\xfd-sau-khi-s\u1ef1-c\u1ed1-\u0111\u01b0\u1ee3c-kh\u1eafc-ph\u1ee5c",children:[],level:2}],p={toc:h};function s(t){var n=t.components,e=(0,i.Z)(t,o);return(0,c.kt)("wrapper",(0,r.Z)({},p,e,{components:n,mdxType:"MDXLayout"}),(0,c.kt)("h1",{id:"auth"},"Auth"),(0,c.kt)("h2",{id:"y\xeau-c\u1ea7u-nghi\u1ec7p-v\u1ee5"},"Y\xeau c\u1ea7u nghi\u1ec7p v\u1ee5"),(0,c.kt)("ul",null,(0,c.kt)("li",{parentName:"ul"},"Login")),(0,c.kt)("h2",{id:"authorization"},"Authorization"),(0,c.kt)("p",null,"Full permissions, s\u1ebd x\u1eed l\xfd Authorization b\u1eb1ng API Permission"),(0,c.kt)("h2",{id:"authentication"},"Authentication"),(0,c.kt)("ul",null,(0,c.kt)("li",{parentName:"ul"},"S\u1eed d\u1ee5ng AWS Amplify (cung c\u1ea5p UserPoolId, UserPoolClientId v\xe0 IdentityPoolId), c\u1ea7n c\xe0i \u0111\u1eb7t Identity Pools"),(0,c.kt)("li",{parentName:"ul"},"X\xe1c th\u1ef1c qua HTTP request v\xe0 tr\u1ea3 v\u1ec1 JWT token"),(0,c.kt)("li",{parentName:"ul"},"S\u1eed d\u1ee5ng SigV4 \u0111\u1ec3 Auth \u1edf Internal (h\u1ed7 tr\u1ee3 CLI)")),(0,c.kt)("p",null,"L\u01b0u tr\u1eef d\u1eef li\u1ec7u \u0111\u1ecbnh danh ng\u01b0\u1eddi d\xf9ng"),(0,c.kt)("p",null,"Database DynamoDB v\u1edbi kh\u1ea3 n\u0103ng sync d\u1eef li\u1ec7u t\u1edbi Cognito (1 chi\u1ec1u DynamoDB -> Cognito), n\xean l\u01b0u password d\u01b0\u1edbi d\u1ea1ng hash \u0111\u1ec3 c\xf3 kh\u1ea3 n\u0103ng kh\xf4i ph\u1ee5c khi g\u1eb7p s\u1ef1 c\u1ed1, c\u1ea7n b\u1ea3o m\u1eadt k\u1ef9 c\xe0ng password. Do kh\xf4ng th\u1ec3 backup password tr\u1ef1c ti\u1ebfp t\u1eeb Cognito."),(0,c.kt)("ul",null,(0,c.kt)("li",{parentName:"ul"},"MFA"),(0,c.kt)("li",{parentName:"ul"},"Reset password"),(0,c.kt)("li",{parentName:"ul"},"Sign up")),(0,c.kt)("h2",{id:"c\xf3-kh\u1ea3-n\u0103ng-ti\u1ebfp-t\u1ee5c-khi-g\u1eb7p-s\u1ef1-c\u1ed1-ho\u1eb7c-revert-ho\xe0n-to\xe0n-n\u1ebfu-l\u1ed7i-x\u1ea3y-ra-\u0111\u1ec3-ng\u01b0\u1eddi-d\xf9ng-c\xf3-th\u1ec3-ti\u1ebfp-t\u1ee5c-\u0111\u0103ng-k\xfd-sau-khi-s\u1ef1-c\u1ed1-\u0111\u01b0\u1ee3c-kh\u1eafc-ph\u1ee5c"},"C\xf3 kh\u1ea3 n\u0103ng ti\u1ebfp t\u1ee5c khi g\u1eb7p s\u1ef1 c\u1ed1 ho\u1eb7c revert ho\xe0n to\xe0n n\u1ebfu l\u1ed7i x\u1ea3y ra \u0111\u1ec3 ng\u01b0\u1eddi d\xf9ng c\xf3 th\u1ec3 ti\u1ebfp t\u1ee5c \u0111\u0103ng k\xfd sau khi s\u1ef1 c\u1ed1 \u0111\u01b0\u1ee3c kh\u1eafc ph\u1ee5c."),(0,c.kt)("p",null,"N\xean ph\u1ea3n h\u1ed3i nhanh v\xe0 b\u1ea5t \u0111\u1ed3ng b\u1ed9 n\u1ebfu c\xf3 th\u1ec3 v\xe0 g\u1eedi mail th\xf4ng b\xe1o x\xe1c nh\u1eadn khi \u0111\xe3 th\xe0nh c\xf4ng t\u1ea1o t\xe0i kho\u1ea3n.\nTr\u01b0\u1eddng h\u1ee3p l\u1ed7i ph\u1ea3i th\xf4ng b\xe1o t\u1edbi ng\u01b0\u1eddi d\xf9ng tr\xean UI \u0111\u1ec3 m\u1eddi th\u1eed l\u1ea1i. (Consider s\u1eed d\u1ee5ng Step Functions)\nS\u1eed d\u1ee5ng c\u01a1 ch\u1ebf Single Tenant \u0111\u1ec3 qu\u1ea3n l\xfd t\u1eadp trung (1 User Pool)"),(0,c.kt)("ul",null,(0,c.kt)("li",{parentName:"ul"},"Caching\nS\u1eed d\u1ee5ng Lambda Authorizer v\xe0 \u0111\u1eb7t cache")),(0,c.kt)("p",null,"L\u01b0\u1ee3c \u0111\u1ed3:\nReact -> Cognito -> Token -> API Gateway -> API Backend\nAPI -> Lambda Auth HTTP -> Token -> JWT Call API Backend"),(0,c.kt)("p",null,"N\u1ebfu kh\xf4ng bi\u1ebft password th\xec ph\u1ea3i t\u1ea1o script \u1edf JS \u0111\u1ec3 capture password c\u1ee7a ng\u01b0\u1eddi d\xf9ng."),(0,c.kt)("p",null,"Monitor:\nTheo d\xf5i log\nTest automation e2e"),(0,c.kt)("ul",null,(0,c.kt)("li",{parentName:"ul"},"Login"),(0,c.kt)("li",{parentName:"ul"},"Reset"),(0,c.kt)("li",{parentName:"ul"},"Reset")))}s.isMDXComponent=!0}}]);